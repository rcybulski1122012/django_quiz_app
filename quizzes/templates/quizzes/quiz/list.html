{% extends 'base.html' %}
{% load thumbnail %}

{% block title %}
{% if category %}
  '{{ category|capfirst }}' quizzes
{% else %}
  All quizzes
{% endif %}
{% endblock %}

{% block content %}
<h2>
  {% if category %}
    '{{ category|capfirst }}' quizzes
  {% else %}
    All quizzes
  {% endif %}
</h2>
<hr>
<div class="row justify-content-center">
  {% for quiz in quizzes %}
    <div class="col-xl-4 col-md-6 my-3">
      <div class="card" style="width: 20em">
        <img src="{{ quiz.thumbnail|thumbnail_url:'quiz_thumbnail' }}" class="card-img-top" alt="quiz thumbnail">
        <div class="card-body">
          <h5 class="card-title">{{ quiz.title }}</h5>
          <p class="card-text" style="height: 3em;">{{ quiz.description|truncatechars:50 }}</p>
          <a href="{{ quiz.get_absolute_url }}" class="btn btn-primary">Take the quiz</a>
        </div>
      </div>
    </div>
  {% empty %}
    <p>There are no quizzes yet.</p>
  {% endfor %}
</div>

{% if page_obj.paginator.num_pages > 1 %}
<nav>
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.number|add:'-1' }}">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
    {% endif %}
    <!-- TODO: start here only 3 below and 3 over-->
    {% for page_num in page_obj.paginator.page_range %}
      {% if page_num > page_obj.number|add:'-3' and page_num < page_obj.number|add:'3' %}
      <li class="page-item {% if page_obj.number ==  page_num %}active{% endif %}"><a class="page-link" href="?page={{ page_num }}">
        {{ page_num }}</a></li>
      {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.number|add:'1' }}">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    {% endif %}
  </ul>
</nav>
{% endif %}
{% endblock %}
